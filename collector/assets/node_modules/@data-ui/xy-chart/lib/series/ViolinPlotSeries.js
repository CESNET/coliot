'use strict';var _defineProperty2=require('babel-runtime/helpers/defineProperty'),_defineProperty3=_interopRequireDefault(_defineProperty2),_extends2=require('babel-runtime/helpers/extends'),_extends3=_interopRequireDefault(_extends2);Object.defineProperty(exports,'__esModule',{value:!0});exports.default=ViolinPlotSeries;var _shared=require('@data-ui/shared'),_group=require('@vx/group'),_propTypes=require('prop-types'),_propTypes2=_interopRequireDefault(_propTypes),_react=require('react'),_react2=_interopRequireDefault(_react),_theme=require('@data-ui/theme'),_stats=require('@vx/stats'),_chartUtils=require('../utils/chartUtils'),_sharedSeriesProps=require('../utils/sharedSeriesProps'),_sharedSeriesProps2=_interopRequireDefault(_sharedSeriesProps),_propShapes=require('../utils/propShapes');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var propTypes=(0,_extends3.default)({},_sharedSeriesProps2.default,{data:_propShapes.violinPlotSeriesDataShape.isRequired,horizontal:_propTypes2.default.bool,fill:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.string]),stroke:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.string]),strokeWidth:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.number]),widthRatio:_propTypes2.default.number}),defaultProps={stroke:_theme.color.darkGray,strokeWidth:2,fill:_theme.color.default,horizontal:!1,widthRatio:1},MAX_BOX_WIDTH=50,x=function(a){return a.x},y=function(a){return a.y};function ViolinPlotSeries(a){var b=a.data,c=a.fill,e=a.stroke,f=a.strokeWidth,d=a.xScale,g=a.yScale,h=a.horizontal,j=a.widthRatio,k=a.disableMouseEvents,l=a.onMouseMove,m=a.onMouseLeave,n=a.onClick;if(!d||!g)return null;var i=h?g:d,o=h?y:x,p=h?d:g,q=i.bandwidth(),r=Math.min(50,q),s=(i.offset||0)-(q-r)/2,t=h?'top':'left',u=function(a){return(0,_defineProperty3.default)({},t,i(o(a))-s+(1-j)/2*r)};return _react2.default.createElement(_group.Group,null,b.map(function(a,d){return _react2.default.createElement(_shared.FocusBlurHandler,{key:o(a),onBlur:k?null:m,onFocus:k?null:function(c){l({event:c,data:b,datum:a,index:d})}},_react2.default.createElement(_stats.ViolinPlot,(0,_extends3.default)({},u(a),{binData:a.binData,width:r*j,fill:a.fill||(0,_chartUtils.callOrValue)(c,a,d),stroke:a.stroke||(0,_chartUtils.callOrValue)(e,a,d),strokeWidth:a.strokeWidth||(0,_chartUtils.callOrValue)(f,a,d),valueScale:p,horizontal:h,onMouseMove:k?null:l&&function(){return function(c){l({event:c,data:b,datum:a,index:d})}},onMouseLeave:k?null:m&&function(){return m},onClick:k?null:n&&function(){return function(c){n({event:c,data:b,datum:a,index:d})}}})))}))}ViolinPlotSeries.propTypes=propTypes,ViolinPlotSeries.defaultProps=defaultProps,ViolinPlotSeries.displayName='ViolinPlotSeries';