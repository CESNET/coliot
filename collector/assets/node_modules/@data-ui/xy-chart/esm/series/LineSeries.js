import _Object$getPrototypeOf from'babel-runtime/core-js/object/get-prototype-of';import _classCallCheck from'babel-runtime/helpers/classCallCheck';import _createClass from'babel-runtime/helpers/createClass';import _possibleConstructorReturn from'babel-runtime/helpers/possibleConstructorReturn';import _inherits from'babel-runtime/helpers/inherits';import _extends from'babel-runtime/helpers/extends';import{color}from'@data-ui/theme';import{FocusBlurHandler}from'@data-ui/shared';import{GlyphDot}from'@vx/glyph';import{LinePath}from'@vx/shape';import PropTypes from'prop-types';import React from'react';import{callOrValue,isDefined}from'../utils/chartUtils';import findClosestDatum from'../utils/findClosestDatum';import interpolatorLookup from'../utils/interpolatorLookup';import{interpolationShape,lineSeriesDataShape}from'../utils/propShapes';import sharedSeriesProps from'../utils/sharedSeriesProps';var propTypes=_extends({},sharedSeriesProps,{data:lineSeriesDataShape.isRequired,interpolation:interpolationShape,showPoints:PropTypes.bool,stroke:PropTypes.oneOfType([PropTypes.func,PropTypes.string]),strokeDasharray:PropTypes.oneOfType([PropTypes.func,PropTypes.string]),strokeWidth:PropTypes.oneOfType([PropTypes.func,PropTypes.number]),strokeLinecap:PropTypes.oneOf(['butt','square','round','inherit'])}),defaultProps={interpolation:'monotoneX',showPoints:!1,stroke:color.default,strokeDasharray:null,strokeWidth:3,strokeLinecap:'round'},x=function(a){return a.x},y=function(a){return a.y},defined=function(a){return isDefined(y(a))},noEventsStyles={pointerEvents:'none'},LineSeries=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||_Object$getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){var a=this.props,b=a.data,c=a.disableMouseEvents,d=a.interpolation,e=a.showPoints,f=a.stroke,g=a.strokeDasharray,h=a.strokeWidth,i=a.strokeLinecap,j=a.xScale,k=a.yScale,l=a.onClick,m=a.onMouseMove,n=a.onMouseLeave;if(!j||!k)return null;var o=callOrValue(f),p=interpolatorLookup[d]||interpolatorLookup.monotoneX;return React.createElement(LinePath,{style:c?noEventsStyles:null,data:b,xScale:j,yScale:k,x:x,y:y,stroke:o,strokeWidth:callOrValue(h),strokeDasharray:callOrValue(g),strokeLinecap:i,curve:p,defined:defined,onClick:c?null:l&&function(){return function(a){var c=findClosestDatum({data:b,getX:x,event:a,xScale:j});l({event:a,data:b,datum:c,color:o})}},onMouseMove:c?null:m&&function(){return function(a){var c=findClosestDatum({data:b,getX:x,event:a,xScale:j});m({event:a,data:b,datum:c,color:o})}},onMouseLeave:c?null:n&&function(){return n},glyph:function glyph(a,d){return isDefined(x(a))&&isDefined(y(a))&&React.createElement(FocusBlurHandler,{key:'linepoint-'+d,onBlur:c?null:n,onFocus:c?null:function(c){m({event:c,data:b,datum:a,color:a.stroke||callOrValue(f,a,d),index:d})}},e&&React.createElement(GlyphDot,{key:d+'-'+x(a),cx:j(x(a)),cy:k(y(a)),r:4,fill:a.stroke||callOrValue(f,a,d),stroke:'#FFFFFF',strokeWidth:1,style:{pointerEvents:'none'}},a.label&&React.createElement('text',{x:j(x(a)),y:k(y(a)),dx:10,fill:a.stroke||callOrValue(f,a,d),stroke:'#fff',strokeWidth:1,fontSize:12},a.label)))}})}}]),b}(React.PureComponent);export default LineSeries;LineSeries.propTypes=propTypes,LineSeries.defaultProps=defaultProps,LineSeries.displayName='LineSeries';