'use strict';var _defineProperty2=require('babel-runtime/helpers/defineProperty'),_defineProperty3=_interopRequireDefault(_defineProperty2),_getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of'),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn'),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require('babel-runtime/helpers/inherits'),_inherits3=_interopRequireDefault(_inherits2),_extends2=require('babel-runtime/helpers/extends'),_extends3=_interopRequireDefault(_extends2),_stats=require('@vx/stats'),_shared=require('@data-ui/shared'),_group=require('@vx/group'),_propTypes=require('prop-types'),_propTypes2=_interopRequireDefault(_propTypes),_react=require('react'),_react2=_interopRequireDefault(_react),_theme=require('@data-ui/theme'),_chartUtils=require('../utils/chartUtils'),_propShapes=require('../utils/propShapes'),_sharedSeriesProps=require('../utils/sharedSeriesProps'),_sharedSeriesProps2=_interopRequireDefault(_sharedSeriesProps);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var propTypes=(0,_extends3.default)({},_sharedSeriesProps2.default,{containerEvents:_propTypes2.default.bool,data:_propShapes.boxPlotSeriesDataShape.isRequired,fill:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.string]),horizontal:_propTypes2.default.bool,stroke:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.string]),strokeWidth:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.number]),fillOpacity:_propTypes2.default.oneOfType([_propTypes2.default.func,_propTypes2.default.number]),widthRatio:_propTypes2.default.number,containerProps:_propTypes2.default.object,outlierProps:_propTypes2.default.object,boxProps:_propTypes2.default.object,minProps:_propTypes2.default.object,maxProps:_propTypes2.default.object,medianProps:_propTypes2.default.object}),defaultProps={containerEvents:!0,stroke:_theme.color.darkGray,strokeWidth:2,fill:_theme.color.default,fillOpacity:1,horizontal:!1,widthRatio:1,containerProps:null,outlierProps:null,boxProps:null,minProps:null,maxProps:null,medianProps:null},MAX_BOX_WIDTH=50,x=function(a){return a.x},y=function(a){return a.y},min=function(a){return a.min},max=function(a){return a.max},median=function(a){return a.median},firstQuartile=function(a){return a.firstQuartile},thirdQuartile=function(a){return a.thirdQuartile},outliers=function(a){return a.outliers||[]},BoxPlotSeries=function(a){function b(){return(0,_classCallCheck3.default)(this,b),(0,_possibleConstructorReturn3.default)(this,(b.__proto__||(0,_getPrototypeOf2.default)(b)).apply(this,arguments))}return(0,_inherits3.default)(b,a),(0,_createClass3.default)(b,[{key:'render',value:function render(){var a=this.props,b=a.containerEvents,c=a.data,e=a.fill,f=a.stroke,g=a.strokeWidth,d=a.xScale,h=a.yScale,j=a.horizontal,k=a.widthRatio,l=a.fillOpacity,m=a.containerProps,n=a.outlierProps,o=a.boxProps,p=a.minProps,q=a.maxProps,r=a.medianProps,s=a.onMouseMove,t=a.onMouseLeave,u=a.disableMouseEvents,v=a.onClick;if(!d||!h)return null;var i=j?h:d,w=j?y:x,z=j?d:h,A=i.bandwidth(),B=Math.min(50,A),C=(i.offset||0)-(A-B)/2,D=j?'top':'left',E=function(a){return(0,_defineProperty3.default)({},D,i(w(a))-C+(1-k)/2*B)},F=function(a,b){return{onMouseMove:u?null:s&&function(){return function(d){s({event:d,data:c,datum:a,index:b})}},onMouseLeave:u?null:t&&function(){return t},onClick:u?null:v&&function(){return function(d){v({event:d,data:c,datum:a,index:b})}}}};return _react2.default.createElement(_group.Group,null,c.map(function(a,d){var h=F(a,d);return(0,_chartUtils.isDefined)(min(a))&&_react2.default.createElement(_shared.FocusBlurHandler,{key:w(a),xlinkHref:'#',onBlur:u?null:t,onFocus:u?null:function(b){s({event:b,data:c,datum:a,index:d})}},_react2.default.createElement(_stats.BoxPlot,(0,_extends3.default)({min:min(a),max:max(a)},E(a),{firstQuartile:firstQuartile(a),thirdQuartile:thirdQuartile(a),median:median(a),boxWidth:B*k,outliers:outliers(a),fill:a.fill||(0,_chartUtils.callOrValue)(e,a,d),stroke:a.stroke||(0,_chartUtils.callOrValue)(f,a,d),strokeWidth:a.strokeWidth||(0,_chartUtils.callOrValue)(g,a,d),fillOpacity:a.fillOpacity||(0,_chartUtils.callOrValue)(l,a,d),valueScale:z,horizontal:j,container:b,containerProps:(b||m||void 0)&&(0,_extends3.default)({},m,b&&h),outlierProps:(!b||n||void 0)&&(0,_extends3.default)({},n,!b&&h),boxProps:(!b||o||void 0)&&(0,_extends3.default)({},o,!b&&h),minProps:(!b||p||void 0)&&(0,_extends3.default)({},p,!b&&h),maxProps:(!b||q||void 0)&&(0,_extends3.default)({},q,!b&&h),medianProps:(!b||r||void 0)&&(0,_extends3.default)({},r,!b&&h)})))}))}}]),b}(_react2.default.PureComponent);exports.default=BoxPlotSeries,BoxPlotSeries.propTypes=propTypes,BoxPlotSeries.defaultProps=defaultProps,BoxPlotSeries.displayName='BoxPlotSeries';