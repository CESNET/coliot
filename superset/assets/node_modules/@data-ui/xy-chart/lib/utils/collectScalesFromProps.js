'use strict';var _extends2=require('babel-runtime/helpers/extends'),_extends3=_interopRequireDefault(_extends2);Object.defineProperty(exports,'__esModule',{value:!0});exports.default=collectScalesFromProps;var _react=require('react'),_collectDataFromChildSeries=require('./collectDataFromChildSeries'),_collectDataFromChildSeries2=_interopRequireDefault(_collectDataFromChildSeries),_getChartDimensions2=require('./getChartDimensions'),_getChartDimensions3=_interopRequireDefault(_getChartDimensions2),_getScaleForAccessor=require('./getScaleForAccessor'),_getScaleForAccessor2=_interopRequireDefault(_getScaleForAccessor),_chartUtils=require('./chartUtils');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var getX=function(a){return a&&a.x},xString=function(a){return getX(a).toString()};function collectScalesFromProps(a){var b=a.xScale,c=a.yScale,d=a.children,e=(0,_getChartDimensions3.default)(a),f=e.innerWidth,g=e.innerHeight,h=(0,_collectDataFromChildSeries2.default)(d),i=h.allData,j=(0,_getScaleForAccessor2.default)((0,_extends3.default)({allData:i,minAccessor:function minAccessor(a){return'undefined'==typeof a.x0?a.x:a.x0},maxAccessor:function maxAccessor(a){return'undefined'==typeof a.x1?a.x:a.x1},range:[0,f]},b)),k=(0,_getScaleForAccessor2.default)((0,_extends3.default)({allData:i,minAccessor:function minAccessor(a){return'undefined'==typeof a.y0?a.y:a.y0},maxAccessor:function maxAccessor(a){return'undefined'==typeof a.y1?a.y:a.y1},range:[g,0]},c));return _react.Children.forEach(d,function(a){var c=(0,_chartUtils.componentName)(a);if((0,_chartUtils.isBarSeries)(c)&&'band'!==b.type){var d=(0,_getScaleForAccessor2.default)({allData:i,minAccessor:xString,maxAccessor:xString,type:'band',rangeRound:[0,f],paddingOuter:1}),e=d.bandwidth()/2;j.range([e,f-e]),j.barWidth=d.bandwidth(),j.offset=e}(0,_chartUtils.isCirclePackSeries)(c)&&k.domain([-g/2,g/2])}),{xScale:j,yScale:k}}