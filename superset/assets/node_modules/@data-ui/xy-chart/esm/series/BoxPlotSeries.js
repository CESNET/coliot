import _defineProperty from'babel-runtime/helpers/defineProperty';import _Object$getPrototypeOf from'babel-runtime/core-js/object/get-prototype-of';import _classCallCheck from'babel-runtime/helpers/classCallCheck';import _createClass from'babel-runtime/helpers/createClass';import _possibleConstructorReturn from'babel-runtime/helpers/possibleConstructorReturn';import _inherits from'babel-runtime/helpers/inherits';import _extends from'babel-runtime/helpers/extends';import{BoxPlot}from'@vx/stats';import{FocusBlurHandler}from'@data-ui/shared';import{Group}from'@vx/group';import PropTypes from'prop-types';import React from'react';import{color as themeColors}from'@data-ui/theme';import{callOrValue,isDefined}from'../utils/chartUtils';import{boxPlotSeriesDataShape}from'../utils/propShapes';import sharedSeriesProps from'../utils/sharedSeriesProps';var propTypes=_extends({},sharedSeriesProps,{containerEvents:PropTypes.bool,data:boxPlotSeriesDataShape.isRequired,fill:PropTypes.oneOfType([PropTypes.func,PropTypes.string]),horizontal:PropTypes.bool,stroke:PropTypes.oneOfType([PropTypes.func,PropTypes.string]),strokeWidth:PropTypes.oneOfType([PropTypes.func,PropTypes.number]),fillOpacity:PropTypes.oneOfType([PropTypes.func,PropTypes.number]),widthRatio:PropTypes.number,containerProps:PropTypes.object,outlierProps:PropTypes.object,boxProps:PropTypes.object,minProps:PropTypes.object,maxProps:PropTypes.object,medianProps:PropTypes.object}),defaultProps={containerEvents:!0,stroke:themeColors.darkGray,strokeWidth:2,fill:themeColors.default,fillOpacity:1,horizontal:!1,widthRatio:1,containerProps:null,outlierProps:null,boxProps:null,minProps:null,maxProps:null,medianProps:null},MAX_BOX_WIDTH=50,x=function(a){return a.x},y=function(a){return a.y},min=function(a){return a.min},max=function(a){return a.max},median=function(a){return a.median},firstQuartile=function(a){return a.firstQuartile},thirdQuartile=function(a){return a.thirdQuartile},outliers=function(a){return a.outliers||[]},BoxPlotSeries=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||_Object$getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){var a=this.props,b=a.containerEvents,c=a.data,e=a.fill,f=a.stroke,g=a.strokeWidth,d=a.xScale,h=a.yScale,j=a.horizontal,k=a.widthRatio,l=a.fillOpacity,m=a.containerProps,n=a.outlierProps,o=a.boxProps,p=a.minProps,q=a.maxProps,r=a.medianProps,s=a.onMouseMove,t=a.onMouseLeave,u=a.disableMouseEvents,v=a.onClick;if(!d||!h)return null;var i=j?h:d,w=j?y:x,z=j?d:h,A=i.bandwidth(),B=Math.min(50,A),C=(i.offset||0)-(A-B)/2,D=j?'top':'left',E=function(a){return _defineProperty({},D,i(w(a))-C+(1-k)/2*B)},F=function(a,b){return{onMouseMove:u?null:s&&function(){return function(d){s({event:d,data:c,datum:a,index:b})}},onMouseLeave:u?null:t&&function(){return t},onClick:u?null:v&&function(){return function(d){v({event:d,data:c,datum:a,index:b})}}}};return React.createElement(Group,null,c.map(function(a,d){var h=F(a,d);return isDefined(min(a))&&React.createElement(FocusBlurHandler,{key:w(a),xlinkHref:'#',onBlur:u?null:t,onFocus:u?null:function(b){s({event:b,data:c,datum:a,index:d})}},React.createElement(BoxPlot,_extends({min:min(a),max:max(a)},E(a),{firstQuartile:firstQuartile(a),thirdQuartile:thirdQuartile(a),median:median(a),boxWidth:B*k,outliers:outliers(a),fill:a.fill||callOrValue(e,a,d),stroke:a.stroke||callOrValue(f,a,d),strokeWidth:a.strokeWidth||callOrValue(g,a,d),fillOpacity:a.fillOpacity||callOrValue(l,a,d),valueScale:z,horizontal:j,container:b,containerProps:(b||m||void 0)&&_extends({},m,b&&h),outlierProps:(!b||n||void 0)&&_extends({},n,!b&&h),boxProps:(!b||o||void 0)&&_extends({},o,!b&&h),minProps:(!b||p||void 0)&&_extends({},p,!b&&h),maxProps:(!b||q||void 0)&&_extends({},q,!b&&h),medianProps:(!b||r||void 0)&&_extends({},r,!b&&h)})))}))}}]),b}(React.PureComponent);export default BoxPlotSeries;BoxPlotSeries.propTypes=propTypes,BoxPlotSeries.defaultProps=defaultProps,BoxPlotSeries.displayName='BoxPlotSeries';